document.addEventListener("DOMContentLoaded",(()=>{const sidebar=document.querySelector(".sidebar");const menuIcon=document.querySelector(".iconoMenu");const closeBtn=document.querySelector(".close-btn");menuIcon.addEventListener("click",(()=>sidebar.classList.add("active")));closeBtn.addEventListener("click",(()=>sidebar.classList.remove("active")));document.addEventListener("click",(e=>{if(!sidebar.contains(e.target)&&!menuIcon.contains(e.target)){sidebar.classList.remove("active")}}));const carouselImages=document.querySelector(".carousel-images");const images=document.querySelectorAll(".carousel-images picture");const prevButton=document.querySelector(".carousel-control.prev");const nextButton=document.querySelector(".carousel-control.next");let currentIndex=0;let autoSlideInterval;function updateCarousel(){const offset=-currentIndex*100;carouselImages.style.transform=`translateX(${offset}%)`}function nextSlide(){currentIndex=(currentIndex+1)%images.length;updateCarousel()}function prevSlide(){currentIndex=(currentIndex-1+images.length)%images.length;updateCarousel()}function resetAutoSlide(){clearInterval(autoSlideInterval);autoSlideInterval=setInterval(nextSlide,7500)}if(images.length&&prevButton&&nextButton){updateCarousel();autoSlideInterval=setInterval(nextSlide,7500);nextButton.addEventListener("click",(()=>{nextSlide();resetAutoSlide()}));prevButton.addEventListener("click",(()=>{prevSlide();resetAutoSlide()}))}if(window.gsap&&window.ScrollTrigger){gsap.registerPlugin(ScrollTrigger);gsap.from(".carousel",{duration:1.5,y:-50,opacity:0,ease:"power2.out",scrollTrigger:{trigger:".carousel",start:"top 80%",toggleActions:"play none none reset"}});gsap.from(".carousel-images img",{duration:1,scale:.9,opacity:0,stagger:.3,ease:"power2.out",scrollTrigger:{trigger:".carousel",start:"top 80%",toggleActions:"play none none reset"}});gsap.from(".contenedorServicios",{duration:1,y:50,opacity:0,ease:"power2.out",scrollTrigger:{trigger:".contenedorServicios",start:"top 95%",toggleActions:"play none none reset"}});document.querySelectorAll(".contenedorServicios .col-12").forEach((col=>{gsap.from(col,{duration:1,y:50,opacity:0,ease:"power2.out",scrollTrigger:{trigger:col,start:"top 95%",toggleActions:"play none none reset"}})}));gsap.utils.toArray(".cuadro").forEach(((cuadro,i)=>{gsap.from(cuadro,{scrollTrigger:{trigger:cuadro,start:"top 85%",end:"bottom 15%",toggleActions:"play none none reverse"},opacity:0,y:50,duration:.6,delay:i*.1,ease:"power2.out"})}));gsap.from(".fotosPatrocinadores",{duration:1,y:50,opacity:0,ease:"power2.out",scrollTrigger:{trigger:".fotosPatrocinadores",start:"top 85%",toggleActions:"play none none reset"}});gsap.utils.toArray(".fotosPatrocinadores .imagenPatrocinador").forEach(((imagen,i)=>{gsap.from(imagen,{scrollTrigger:{trigger:".fotosPatrocinadores",start:"top 85%",toggleActions:"play none none reset"},opacity:0,y:30,duration:.6,delay:i*.2,ease:"power2.out"})}));gsap.from(".contenedorTextoUbicacion",{scrollTrigger:{trigger:".contenedorTextoUbicacion",start:"top 85%",toggleActions:"play none none reset"},opacity:0,y:50,duration:1,ease:"power2.out"});gsap.from(".iframe-mapa",{scrollTrigger:{trigger:".iframe-mapa",start:"top 85%",toggleActions:"play none none reset"},opacity:0,scale:.9,duration:1,ease:"power2.out"})}}));window.addEventListener("load",(()=>{document.getElementById("loader-bg").classList.add("hide");setTimeout((()=>{document.getElementById("loader-bg").style.display="none"}),400)}));document.addEventListener("DOMContentLoaded",(()=>{const estadisticasSection=document.querySelector(".estadisticas-electricidad");const estadisticas=document.querySelectorAll(".item-estadistica");if(window.gsap&&window.ScrollTrigger){gsap.from(estadisticasSection,{opacity:0,y:60,duration:1,ease:"power2.out",scrollTrigger:{trigger:estadisticasSection,start:"top 85%",toggleActions:"play none none reset"}});gsap.utils.toArray(estadisticas).forEach(((item,i)=>{gsap.from(item,{opacity:0,y:40,duration:.7,delay:.2+i*.15,ease:"power2.out",scrollTrigger:{trigger:estadisticasSection,start:"top 85%",toggleActions:"play none none reset"}})}))}const valores=document.querySelectorAll(".item-estadistica .valor");const duration=1800;valores.forEach(((el,idx)=>{const final=parseInt(el.getAttribute("data-valor"),10);if(idx<2){let steps=45;let currentStep=0;function animateRandom(){currentStep++;let min=Math.floor(final*(currentStep/steps)*.7);let max=Math.floor(final*(currentStep/steps));let value=Math.floor(Math.random()*(max-min+1))+min;if(currentStep<steps){el.textContent="+"+Math.min(value,final).toLocaleString("es-ES");setTimeout(animateRandom,duration/steps)}else{el.textContent="+"+final.toLocaleString("es-ES")}}if(window.gsap&&window.ScrollTrigger){ScrollTrigger.create({trigger:estadisticasSection,start:"top 85%",once:true,onEnter:animateRandom})}else{animateRandom()}}else{let current=0;const frameRate=1e3/60;const increment=Math.ceil(final/(duration/frameRate));function animateCount(){current+=increment;if(current<final){el.textContent="+"+current.toLocaleString("es-ES");setTimeout(animateCount,frameRate)}else{el.textContent="+"+final.toLocaleString("es-ES")}}if(window.gsap&&window.ScrollTrigger){ScrollTrigger.create({trigger:estadisticasSection,start:"top 85%",once:true,onEnter:animateCount})}else{animateCount()}}}))}));