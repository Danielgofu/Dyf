gsap.registerPlugin(ScrollTrigger,ScrollToPlugin);document.addEventListener("DOMContentLoaded",(()=>{gsap.from(".hero-title, .hero-subtitle",{opacity:0,y:-20,duration:1,ease:"power2.out",stagger:.2});gsap.from(".btn-hero",{opacity:0,y:20,duration:1,ease:"power2.out",delay:.5});const btnHero=document.querySelector(".btn-hero");if(btnHero){btnHero.addEventListener("click",(e=>{e.preventDefault();const target=document.querySelector("#valores");if(!target)return;const offset=window.innerWidth<=768?-40:-100;const targetPosition=target.getBoundingClientRect().top+window.scrollY+offset;gsap.to(window,{scrollTo:{y:targetPosition,autoKill:true},duration:1,ease:"power2.out"})}))}}));gsap.from(".equipo-contacto",{scrollTrigger:{trigger:".equipo-contacto",start:"top 80%",toggleActions:"play none none none"},opacity:0,scale:.9,duration:.8,ease:"power2.out"});gsap.from(".testimonios-equipo",{scrollTrigger:{trigger:".testimonios-equipo",start:"top 80%",toggleActions:"play none none none"},opacity:0,scale:.9,duration:.8,ease:"power2.out"});document.addEventListener("DOMContentLoaded",(function(){const carousel=document.getElementById("valores-carousel");const leftBtn=document.getElementById("valores-left");const rightBtn=document.getElementById("valores-right");const cards=carousel.querySelectorAll(".card");const card=cards[0];let cardWidth=card.offsetWidth+32;function updateCardWidth(){cardWidth=card.offsetWidth+32}function bounce(btn,direction="left"){const xMove=direction==="left"?-12:12;gsap.fromTo(btn,{scale:1,x:0},{scale:.88,x:xMove,duration:.13,yoyo:true,repeat:1,ease:"power1.inOut",onComplete:()=>{gsap.to(btn,{scale:1,x:0,duration:.15,ease:"power1.out"})}})}leftBtn.addEventListener("click",(()=>{updateCardWidth();carousel.scrollBy({left:-cardWidth,behavior:"smooth"});bounce(leftBtn,"left")}));rightBtn.addEventListener("click",(()=>{updateCardWidth();carousel.scrollBy({left:cardWidth,behavior:"smooth"});bounce(rightBtn,"right")}));function updateArrows(){leftBtn.disabled=carousel.scrollLeft<10;rightBtn.disabled=carousel.scrollLeft+carousel.offsetWidth>=carousel.scrollWidth-10}carousel.addEventListener("scroll",updateArrows);window.addEventListener("resize",(()=>{updateCardWidth();updateArrows()}));updateArrows();gsap.from(cards,{opacity:0,scale:.92,stagger:.12,duration:.7,ease:"power2.out",scrollTrigger:{trigger:carousel,start:"top 85%",once:true}})}));document.addEventListener("DOMContentLoaded",(function(){const slides=Array.from(document.querySelectorAll(".testimonio-slide"));const leftBtn=document.getElementById("testimonios-left");const rightBtn=document.getElementById("testimonios-right");const dotsContainer=document.getElementById("testimonios-dots");let current=0;slides.forEach(((_,i)=>{const dot=document.createElement("button");dot.className="testimonios-dot"+(i===0?" active":"");dot.setAttribute("aria-label",`Ver testimonio ${i+1}`);dot.addEventListener("click",(()=>goTo(i)));dotsContainer.appendChild(dot)}));const dots=Array.from(dotsContainer.children);function update(){slides.forEach(((slide,i)=>{slide.classList.toggle("active",i===current)}));dots.forEach(((dot,i)=>{dot.classList.toggle("active",i===current)}));leftBtn.disabled=current===0;rightBtn.disabled=current===slides.length-1}function goTo(idx){if(idx===current)return;gsap.to(slides[current],{opacity:0,duration:.3,onComplete:()=>{slides[current].classList.remove("active");current=idx;slides[current].classList.add("active");gsap.fromTo(slides[current],{opacity:0},{opacity:1,duration:.4});update()}})}leftBtn.addEventListener("click",(()=>{if(current>0)goTo(current-1)}));rightBtn.addEventListener("click",(()=>{if(current<slides.length-1)goTo(current+1)}));let startX=0;const slider=document.getElementById("testimonios-slider");slider.addEventListener("touchstart",(e=>{startX=e.touches[0].clientX}));slider.addEventListener("touchend",(e=>{let endX=e.changedTouches[0].clientX;let diff=endX-startX;if(Math.abs(diff)>40){if(diff>0&&current>0)goTo(current-1);else if(diff<0&&current<slides.length-1)goTo(current+1)}}));update()}));gsap.from(".equipo-contacto-nueva",{scrollTrigger:{trigger:".equipo-contacto-nueva",start:"top 80%",toggleActions:"play none none none"},opacity:0,y:60,duration:.9,ease:"power2.out"});gsap.from(".equipo-contacto-nueva .btn-contacto-nueva",{scrollTrigger:{trigger:".equipo-contacto-nueva",start:"top 85%",once:true},opacity:0,y:30,stagger:.12,duration:.7,ease:"power2.out"});